# Nuxt 3 æ¨¡å—åŒ–å¼€å‘æ¨¡æ¿

æœ¬é¡¹ç›®åŸºäº Nuxt 3 æ„å»ºï¼Œé‡‡ç”¨æ¨¡å—åŒ–ç›®å½•ç»“æ„ï¼Œé›†æˆäº†å¸¸ç”¨çš„å·¥å…·ç±»ã€å…¨å±€ç»„ä»¶ã€æ’ä»¶å’Œè°ƒè¯•é…ç½®ï¼Œæ—¨åœ¨æä¾›æ¸…æ™°ã€å¯ç»´æŠ¤çš„å¼€å‘ä½“éªŒã€‚

## ğŸš€ ç‰¹æ€§

- **æ¨¡å—åŒ–æ¶æ„**: æ”¯æŒåŸºäº Nuxt Layers (Local Modules) çš„ä¸šåŠ¡æ¨¡å—éš”ç¦»ã€‚
- **å·¥å…·ç±»åº“**: å†…ç½®æ—¥æœŸå¤„ç†ã€HTTP è¯·æ±‚ã€è¡¨å•éªŒè¯ã€æ ¼å¼åŒ–ç­‰å¸¸ç”¨å·¥å…·ã€‚
- **å…¨å±€ç»„ä»¶**: å°è£…äº†å¼¹çª— (Modal)ã€æ¶ˆæ¯æç¤º (Toast)ã€åŠ è½½ (Loading) ç­‰å¸¸ç”¨ç»„ä»¶ã€‚
- **æ’ä»¶ç³»ç»Ÿ**: æ¼”ç¤ºäº†å¦‚ä½•åˆ›å»ºå’Œä½¿ç”¨å…¨å±€æ’ä»¶ã€‚
- **ä¸­é—´ä»¶**: åŒ…å«å…¨å±€è·¯ç”±ä¸­é—´ä»¶ç¤ºä¾‹ã€‚
- **TypeScript**: å®Œå–„çš„ç±»å‹å®šä¹‰å’Œç±»å‹æ‰©å±•ã€‚
- **TSX æ”¯æŒ**: åŸç”Ÿæ”¯æŒä½¿ç”¨ TSX/JSX ç¼–å†™ç»„ä»¶ã€‚
- **Styled Components**: é›†æˆ `vue3-styled-components` æ”¯æŒ CSS-in-JS æ ·å¼ç¼–å†™ã€‚
- **å•å…ƒæµ‹è¯•**: é›†æˆ Vitest + @nuxt/test-utils è¿›è¡Œå•å…ƒæµ‹è¯•å’Œç»„ä»¶æµ‹è¯•ã€‚
- **è°ƒè¯•é…ç½®**: é¢„é…ç½® VS Code `launch.json`ï¼Œæ”¯æŒå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æ–­ç‚¹è°ƒè¯•ã€‚
- **SSR æ”¯æŒ**: åŒ…å«æœåŠ¡ç«¯æ¸²æŸ“ API å’Œé¡µé¢è°ƒè¯•ç¤ºä¾‹ã€‚

## ğŸ“‚ ç›®å½•ç»“æ„

```bash
â”œâ”€â”€ .vscode/            # VS Code è°ƒè¯•é…ç½®
â”œâ”€â”€ assets/             # é™æ€èµ„æº (CSS, Images)
â”œâ”€â”€ components/         # å…¨å±€ç»„ä»¶
â”‚   â”œâ”€â”€ common/         # é€šç”¨ç»„ä»¶ (BaseModal, BaseToast, BaseLoading)
â”‚   â””â”€â”€ ...
â”œâ”€â”€ composables/        # ç»„åˆå¼å‡½æ•° (useToast, useHello)
â”œâ”€â”€ layouts/            # é¡µé¢å¸ƒå±€
â”œâ”€â”€ middleware/         # è·¯ç”±ä¸­é—´ä»¶ (logger.global.ts)
â”œâ”€â”€ modules/            # ä¸šåŠ¡æ¨¡å— (Nuxt Layers)
â”‚   â””â”€â”€ user/           # ç”¨æˆ·æ¨¡å—ç¤ºä¾‹
â”œâ”€â”€ pages/              # é¡µé¢è·¯ç”± (åŒ…å«å„ç±» Demo)
â”œâ”€â”€ plugins/            # Nuxt æ’ä»¶
â”œâ”€â”€ public/             # é™æ€æ–‡ä»¶
â”œâ”€â”€ server/             # æœåŠ¡ç«¯ API
â”œâ”€â”€ types/              # å…¨å±€ç±»å‹å®šä¹‰ (.d.ts)
â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•° (http, date, validator, format)
â”œâ”€â”€ app.vue             # åº”ç”¨å…¥å£
â””â”€â”€ nuxt.config.ts      # é¡¹ç›®é…ç½®
```

## ğŸ› ï¸ åŠŸèƒ½æ¨¡å—è¯¦è§£

### 1. æ¨¡å—åŒ–å¼€å‘ (Modules)
æˆ‘ä»¬åœ¨ `modules/` ç›®å½•ä¸‹å®ç°äº†ä¸šåŠ¡æ¨¡å—çš„ç‰©ç†éš”ç¦»ã€‚ä»¥ `modules/user` ä¸ºä¾‹ï¼Œå®ƒæ‹¥æœ‰ç‹¬ç«‹çš„ `pages`ã€`components` å’Œ `composables`ï¼Œé€šè¿‡ `nuxt.config.ts` çš„ `extends` ç‰¹æ€§å¼•å…¥ã€‚

### 2. å·¥å…·ç±» (Utils)
ä½äº `utils/` ç›®å½•ï¼ŒNuxt è‡ªåŠ¨å¯¼å…¥ï¼Œå¯ç›´æ¥ä½¿ç”¨ï¼š
- **`$Http`**: åŸºäº `ofetch` å°è£…çš„ HTTP è¯·æ±‚å·¥å…·ï¼Œæ”¯æŒæ‹¦æˆªå™¨ã€æ–‡ä»¶ä¸Šä¼ /ä¸‹è½½ã€‚
- **`formatDate`**: æ—¥æœŸæ ¼å¼åŒ–ã€‚
- **`Validator`**: è¡¨å•éªŒè¯ (æ‰‹æœºå·ã€é‚®ç®±ç­‰)ã€‚
- **`formatMoney`**: é‡‘é¢æ ¼å¼åŒ–ã€‚

### 3. å…¨å±€ç»„ä»¶ (Components)
ä½äº `components/common/`ï¼Œå¼€ç®±å³ç”¨ï¼š
- **`<BaseModal>`**: é€šç”¨å¼¹çª—ç»„ä»¶ã€‚
- **`<BaseToast>`**: æ¶ˆæ¯æç¤ºç»„ä»¶ (é…åˆ `useToast` ä½¿ç”¨)ã€‚
- **`<BaseLoading>`**: åŠ è½½çŠ¶æ€ç»„ä»¶ã€‚

### 4. æ’ä»¶ (Plugins)
ä½äº `plugins/`ï¼Œç¤ºä¾‹ `test-plugin.ts` å±•ç¤ºäº†å¦‚ä½•æ³¨å…¥å…¨å±€è¾…åŠ©å‡½æ•° `$myHelper`ã€‚

### 5. ç±»å‹å®šä¹‰ (Types)
- **`types/global.d.ts`**: å®šä¹‰å…¨å±€é€šç”¨çš„æ¥å£ (å¦‚ `ApiResponse`, `IUser`)ã€‚
- **`types/plugins.d.ts`**: æ‰©å±• NuxtApp å’Œ Vue å®ä¾‹çš„ç±»å‹å®šä¹‰ã€‚

## ğŸ§ª å•å…ƒæµ‹è¯•

æœ¬é¡¹ç›®é›†æˆäº† **Vitest** å’Œ **@nuxt/test-utils**ï¼Œæ”¯æŒå¯¹å·¥å…·å‡½æ•°ã€ç»„ä»¶å’Œç»„åˆå¼å‡½æ•°è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚

**è¿è¡Œæµ‹è¯•**:

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npx vitest run

# ç›‘å¬æ¨¡å¼ (å¼€å‘æ—¶ä½¿ç”¨)
npx vitest
```

æµ‹è¯•è¦†ç›–èŒƒå›´åŒ…æ‹¬ï¼š
- `tests/utils/*.test.ts`: æ—¥æœŸã€éªŒè¯ã€æ ¼å¼åŒ–ç­‰å·¥å…·å‡½æ•°ã€‚
- `tests/components/*.test.ts`: BaseModal, BaseToast ç­‰å…¨å±€ç»„ä»¶ã€‚
- `tests/composables/*.test.ts`: useToast ç­‰ç»„åˆå¼å‡½æ•°ã€‚

## ğŸ’» è°ƒè¯•æŒ‡å—

æœ¬é¡¹ç›®å·²é…ç½® `.vscode/launch.json`ï¼Œæ”¯æŒåœ¨ VS Code ä¸­è¿›è¡Œå…¨æ ˆè°ƒè¯•ã€‚

1.  **å¯åŠ¨è°ƒè¯•**:
    -   æŒ‰ `F5` æˆ–ç‚¹å‡»è°ƒè¯•é¢æ¿ã€‚
    -   é€‰æ‹© **"server: nuxt"** (æ¨è) å¯åŠ¨æœåŠ¡ï¼Œæ”¯æŒæœåŠ¡ç«¯æ–­ç‚¹ã€‚
    -   æˆ–è€…é€‰æ‹© **"client: chrome"** è°ƒè¯•å®¢æˆ·ç«¯ä»£ç ã€‚

2.  **æœåŠ¡ç«¯è°ƒè¯•**:
    -   åœ¨ `server/api/` æˆ– `app.vue` çš„ script setup ä¸­æ‰“æ–­ç‚¹ã€‚
    -   è®¿é—®å¯¹åº”é¡µé¢è§¦å‘é€»è¾‘ã€‚

## ğŸ”— æ¼”ç¤ºé¡µé¢

å¯åŠ¨é¡¹ç›®åï¼Œè®¿é—®ä»¥ä¸‹è·¯å¾„æŸ¥çœ‹åŠŸèƒ½æ¼”ç¤ºï¼š

- **`/`**: é¦–é¡µ
- **`/user`**: ç”¨æˆ·æ¨¡å—ç¤ºä¾‹ (æ¥è‡ª `modules/user`)
- **`/utils-demo`**: å·¥å…·å‡½æ•°æ¼”ç¤º (æ—¥æœŸã€éªŒè¯ã€æ ¼å¼åŒ–)
- **`/http-demo`**: HTTP è¯·æ±‚æ¼”ç¤º (GET, POST, ä¸Šä¼ , ä¸‹è½½)
- **`/components-demo`**: å…¨å±€ç»„ä»¶æ¼”ç¤º (å¼¹çª—, Toast, Loading)
- **`/ssr-demo`**: æœåŠ¡ç«¯æ¸²æŸ“ (SSR) è°ƒè¯•
- **`/plugins-demo`**: æ’ä»¶åŠŸèƒ½æ¼”ç¤º
- **`/types-demo`**: å…¨å±€ç±»å‹å®šä¹‰æ¼”ç¤º

## ğŸ“¦ å®‰è£…ä¸è¿è¡Œ

```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æ„å»ºç”Ÿäº§ç¯å¢ƒ
npm run build

# é¢„è§ˆç”Ÿäº§ç¯å¢ƒ
npm run preview
```
